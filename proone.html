<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LivFit Lottery - Win Amazing Prizes!</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <style>
    :root {
      --primary: #4a148c;
      --secondary: #7b1fa2;
      --accent: #e91e63;
      --light: #f5f5f5;
      --dark: #212121;
      --success: #4caf50;
      --warning: #ff9800;
      --card-bg: #ffffff;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: var(--light);
      line-height: 1.6;
      overflow-x: hidden;
    }

    .hidden-h1 {
      position: absolute;
      left: -9999px;
      visibility: hidden;
    }

    /* Main Content */
    main {
      padding-top: 100px;
      max-width: 1700px;
      margin: 0 auto;
      padding: 100px 20px 50px;
    }

    /* Slider Styles */
    .image-slider {
      position: relative;
      width: 100%;
      height: 500px;
      overflow: hidden;
      border-radius: 15px;
      box-shadow: var(--shadow);
      margin-bottom: 3rem;
    }

    .slider-background {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    .slider-background img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }

    .slider-background img.active {
      opacity: 1;
    }

    .slider-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
      padding: 2rem;
      color: white;
    }

    .slider-overlay h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    .slider-overlay p {
      font-size: 1.2rem;
      max-width: 600px;
    }

    .slider-controls {
      position: absolute;
      bottom: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
    }

    .slider-controls button {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      color: white;
      cursor: pointer;
      font-size: 1.2rem;
      transition: var(--transition);
      backdrop-filter: blur(5px);
    }

    .slider-controls button:hover {
      background: var(--accent);
    }

    /* Lottery Stats */
    .lottery-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 3rem;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      padding: 1.5rem;
      text-align: center;
      backdrop-filter: blur(10px);
      transition: var(--transition);
      border: 1px solid rgba(123, 31, 162, 0.2);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow);
      border-color: var(--secondary);
    }

    .stat-card h3 {
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: #bb86fc;
    }

    .stat-card p {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--light);
    }

    /* Product Section */
    .product-section {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      overflow: hidden;
      margin-bottom: 3rem;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(123, 31, 162, 0.2);
    }

    .product-header {
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      padding: 1.5rem;
      text-align: center;
    }

    .product-header h2 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .product-content {
      display: flex;
      flex-wrap: wrap;
      padding: 2rem;
    }

    .product-image {
      flex: 1;
      min-width: 300px;
      padding: 1rem;
    }

    .product-image img {
      width: 100%;
      border-radius: 10px;
      box-shadow: var(--shadow);
    }

    .product-details {
      flex: 2;
      min-width: 300px;
      padding: 1rem;
    }

    .price-container {
      display: flex;
      align-items: center;
      gap: 20px;
      margin: 1.5rem 0;
    }

    .original-price {
      font-size: 1.8rem;
      text-decoration: line-through;
      color: #b0b0b0;
    }

    .lottery-price {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--accent);
    }

    .features {
      margin: 1.5rem 0;
    }

    .features h3 {
      margin-bottom: 1rem;
      color: #bb86fc;
    }

    .features ul {
      padding-left: 1.5rem;
    }

    .features li {
      margin-bottom: 0.5rem;
    }

    .action-buttons {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin-top: 2rem;
    }

    .btn {
      padding: 12px 25px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      border: none;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(90deg, var(--accent), #ff4081);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4);
    }

    .btn-secondary {
      background: transparent;
      color: var(--light);
      border: 2px solid var(--secondary);
    }

    .btn-secondary:hover {
      background: rgba(123, 31, 162, 0.2);
    }

    /* Ticket Cards Section */
    .ticket-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin-top: 3rem;
    }

    .ticket-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      overflow: hidden;
      backdrop-filter: blur(10px);
      transition: var(--transition);
      border: 1px solid rgba(123, 31, 162, 0.2);
    }

    .ticket-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      border-color: var(--secondary);
    }

    .card-header {
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      padding: 1.2rem;
      text-align: center;
      font-weight: 600;
    }

    .card-body {
      padding: 1.5rem;
    }

    .card-body p {
      margin: 0.8rem 0;
      color: #e0e0e0;
    }

    .card-value {
      font-weight: 700;
      color: var(--accent);
      font-size: 1.2rem;
    }

    .card-footer {
      padding: 1.2rem;
      text-align: center;
      background: rgba(0, 0, 0, 0.1);
    }

    /* Responsive Styles */
    @media (max-width: 992px) {
      .slider-overlay h2 {
        font-size: 2rem;
      }
      
      .product-content {
        flex-direction: column;
      }
    }

    @media (max-width: 768px) {
      .nav-links {
        display: none;
        position: absolute;
        top: 70px;
        left: 0;
        right: 0;
        background: rgba(26, 26, 46, 0.95);
        flex-direction: column;
        align-items: center;
        padding: 1rem 0;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      }
      
      .nav-links.active {
        display: flex;
      }
      
      .nav-links li {
        margin: 0.8rem 0;
      }
      
      .hamburger {
        display: block;
      }
      
      .image-slider {
        height: 400px;
      }
      
      .form-row {
        flex-direction: column;
        gap: 0;
      }
    }

    @media (max-width: 576px) {
      .image-slider {
        height: 300px;
      }
      
      .slider-overlay h2 {
        font-size: 1.5rem;
      }
      
      .slider-overlay p {
        font-size: 1rem;
      }
      
      .price-container {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  
<!-- Header Injection Target -->
  <div id="header-container"></div>
  <!-- Hidden H1 for SEO -->
  <h1 class="hidden-h1">No Any Subscription Gym, Yoga, Calisthenics, Detox & Diet Programs | LivFit.pro</h1>

  <!-- Main Content -->
  <main>
    
    
    <!-- Product Section -->
    <section class="product-section">
      <div class="product-header">
        <h2> Shoes</h2>
      </div>
      <!-- Image Slider -->
    <div class="image-slider" id="slider">
      <div class="slider-background">
        <img src="dctsh1.jpg" alt="Lottery Ticket" class="active" loading="lazy">
        <img src="dctsh2.jpg" alt="Winning Numbers" loading="lazy">
        <img src="dctsh3.jpg" alt="Prize Celebration" loading="lazy">
      </div>
    </div>
      <div class="product-content">
        </div>
        <div class="product-details">
          <h3>Decthalon Kiprun KD900</h3>
          <p>This premium package includes everything you need for a complete home fitness experience. From cardio equipment to strength training tools, we've got you covered.</p>
          
          <div class="price-container">
            <div class="original-price">Original Price: ₹8000</div>
            <div class="lottery-price">Lottery Price: ₹10</div>
          </div>
          
          <div class="features">
            <h3>Package Includes:</h3>
            <ul>
              <li>Professional Treadmill with Interactive Display</li>
              <li>Adjustable Weight Set (5-50 lbs)</li>
              <li>Multi-functional Power Rack with Pull-up Bar</li>
              <li>Adjustable Bench with Leg Developer</li>
              <li>Yoga Mat, Blocks, and Resistance Bands</li>
              <li>Smart Scale and Fitness Tracker</li>
              <li>12-Month Premium Fitness App Subscription</li>
              <li>Nutrition Guide and Meal Planner</li>
            </ul>
          </div>
          
          <div class="action-buttons">
  <button class="btn btn-primary" id="participate-btn">
    <i class="fas fa-ticket-alt"></i> Participate Now
  </button>
  <button class="btn btn-secondary" onclick="window.open('https://www.amazon.com/home-gym-equipment/s?k=home+gym+equipment', '_blank')">
    <i class="fas fa-external-link-alt"></i> View Product on Amazon
  </button>
</div>

<div id="popup-overlay"></div>

<style>
  /* Style for the background overlay with blur effect */
  #popup-overlay {
    display: none; /* Default hidden */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6); /* Black with transparency */
    backdrop-filter: blur(8px); /* The magic blur effect! */
    -webkit-backdrop-filter: blur(8px); /* For Safari browser support */
    z-index: 999; /* Below the popup but above everything else */
  }

  /* Original popup styles - mostly unchanged */
  .popup {
    display: none;
    background: #1a002c;
    color: #fff; /* Added for better text visibility */
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(255, 0, 255, 0.4);
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1000;
    width: 90%;
    max-width: 500px;
  }
  .popup input,
  .popup button[type="submit"] { /* Targeted submit button specifically */
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    border-radius: 10px;
    border: none;
    font-size: 16px;
  }
  .popup input {
    background: #f5f5f5;
    color: #000;
  }
  .popup button[type="submit"],
  .popup button#okayBtn { /* Styling the okay button too */
    background: #ff00cc;
    color: white;
    font-weight: bold;
    cursor: pointer;
    width: 100%;
    padding: 12px;
    margin-top: 15px;
    border-radius: 10px;
    border: none;
    font-size: 16px;
  }
  #ticketDisplay {
    font-weight: bold;
    color: #00ffcc;
    font-size: 20px;
    word-break: break-word;
    text-align: center;
  }
  #countryError {
    color: red;
    font-size: 13px;
    display: none;
  }

  /* Style for the new close button */
  .popup-close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 30px;
    color: #fff;
    cursor: pointer;
    line-height: 1;
    padding: 0;
  }
  
  @media (max-width: 480px) {
    .popup {
      padding: 20px;
    }
    .popup input,
    .popup button {
      font-size: 14px;
      padding: 10px;
    }
  }
</style>

<div class="popup" id="popupForm">
  <button type="button" class="popup-close-btn">&times;</button>
  <form id="lotteryForm">
    <input type="text" name="field1" required placeholder="Your Name" />
    <input type="text" name="field2" required placeholder="Phone Number" />
    <input type="email" name="field3" required placeholder="Email" />
    <input type="date" name="field4" required />
    <input type="text" name="field5" required placeholder="Place" />
    <input type="text" name="field6" required placeholder="Country" />
    <span id="countryError">Please enter your country.</span>
    <input type="hidden" name="ticket" id="ticketCode" />
    <button type="submit">Submit</button>
  </form>
</div>

<div class="popup" id="paymentStep">
  <button type="button" class="popup-close-btn">&times;</button>
  <p>📲 Scan the QR code below to complete your payment:</p>
  <img src="qr-code.jpg" alt="UPI QR Code" style="width:200px; display:block; margin: 15px auto;" />
  <p>⏳ Waiting for payment... You have 5 minutes.</p>
</div>

<div class="popup" id="ticketStep">
  <button type="button" class="popup-close-btn">&times;</button>
  <p>🎉 Thank you! Your ticket number is:</p>
  <div id="ticketDisplay"></div>
  <p>📸 Please take a screenshot for proof.</p>
  <button id="okayBtn">Okay</button>
</div>

<script>
  // Popup Elements
  const participateBtn = document.getElementById('participate-btn');
  const popupOverlay = document.getElementById('popup-overlay');
  const allPopups = document.querySelectorAll('.popup');
  const popupForm = document.getElementById('popupForm');
  const paymentStep = document.getElementById('paymentStep');
  const ticketStep = document.getElementById('ticketStep');
  const closeButtons = document.querySelectorAll('.popup-close-btn');

  // Form & Ticket Elements
  const form = document.getElementById('lotteryForm');
  const ticketInput = document.getElementById('ticketCode');
  const ticketDisplay = document.getElementById('ticketDisplay');
  const okayBtn = document.getElementById('okayBtn');

  let generatedTicket = "";
  let paymentTimeout = null;

  // --- FUNCTIONS TO CONTROL POPUPS (IMPROVED) ---

  // Function to close all popups and the overlay
  function closeAllPopups() {
    if (paymentTimeout) {
      clearTimeout(paymentTimeout); // Stop timer if user closes manually
      paymentTimeout = null;
    }
    popupOverlay.style.display = 'none';
    allPopups.forEach(p => p.style.display = 'none');
  }

  // Function to open a specific popup
  function openPopup(popupElement) {
    popupOverlay.style.display = 'block';
    popupElement.style.display = 'block';
  }

  // --- EVENT LISTENERS ---

  // Show form on "Participate" button click
  participateBtn.addEventListener('click', () => {
    openPopup(popupForm);
  });

  // Add close functionality to all close buttons and the overlay
  closeButtons.forEach(btn => btn.addEventListener('click', closeAllPopups));
  popupOverlay.addEventListener('click', closeAllPopups);

  // Stop click on popup from closing it (event propagation)
  allPopups.forEach(p => p.addEventListener('click', (e) => e.stopPropagation()));

  // Close popup and redirect with the "Okay" button
  okayBtn.addEventListener('click', () => {
      closeAllPopups();
      window.location.href='index.html';
  });


  // --- ORIGINAL FORM LOGIC (UNCHANGED) ---

  // Ticket generator function
  function generateFormattedTicket(...fields) {
    const base = btoa(fields.join('')).replace(/[^A-Z0-9]/gi, '').toUpperCase();
    let raw = base.padEnd(20, 'X').substring(0, 20);
    return raw.match(/.{1,4}/g).join('-');
  }

  // Handle form submission
  form.addEventListener('submit', function (e) {
    e.preventDefault();

    const data = {
      field1: form.field1.value,
      field2: form.field2.value,
      field3: form.field3.value,
      field4: form.field4.value,
      field5: form.field5.value,
      field6: form.field6.value
    };

    if (!data.field6.trim()) {
      document.getElementById('countryError').style.display = 'block';
      return;
    } else {
      document.getElementById('countryError').style.display = 'none';
    }

    // Generate ticket
    data.ticket = generateFormattedTicket(
      data.field1, data.field2, data.field3, data.field4, data.field5
    );
    generatedTicket = data.ticket;
    ticketInput.value = data.ticket;

    // Send data to Google Sheet
    const urlEncoded = new URLSearchParams();
    for (const key in data) {
      urlEncoded.append(key, data[key]);
    }

    fetch(
      "https://script.google.com/macros/s/AKfycbxqzb4Yre9AvKrccxARn3sXZHClj5ghYSh_satCVgBvdDAttmkvueWPaDoOVlac9HEC/exec",
      {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: urlEncoded
      }
    )
    .then((res) => res.text())
    .then((res) => {
      if (res === "Success") {
        // Switch from form to payment popup (overlay remains visible)
        popupForm.style.display = 'none';
        paymentStep.style.display = 'block';

        paymentTimeout = setTimeout(() => {
          alert("⏰ Payment time expired. Redirecting to main page.");
          window.location.href = 'index.html';
        }, 5 * 60 * 1000);

        // Simulated success after 10s (replace with real verification)
        setTimeout(paymentSuccess, 10000);
      } else {
        alert("❌ Submission failed: " + res);
      }
    })
    .catch((err) => {
      alert("❌ Error: " + err.message);
    });
  });

  // After payment success
  function paymentSuccess() {
    if (paymentTimeout) {
        clearTimeout(paymentTimeout);
        paymentTimeout = null;
    }
    // Switch from payment to ticket popup (overlay remains visible)
    paymentStep.style.display = 'none';
    ticketStep.style.display = 'block';
    ticketDisplay.textContent = generatedTicket;
  }
</script>
        </div>
      </div>
    </div>
      <!-- Lottery Stats -->
    <div class="lottery-stats">
      <div class="stat-card">
        <h3>Current Jackpot</h3>
        <p>$245M</p>
      </div>
      <div class="stat-card">
        <h3>Next Draw</h3>
        <p>July 15</p>
      </div>
      <div class="stat-card">
        <h3>Last Winner</h3>
        <p>$189M</p>
      </div>
      <div class="stat-card">
        <h3>Tickets Sold</h3>
        <p>4.2M</p>
      </div>
    </div>
    </section>
    <!-- Product Section Injection Target -->
    <div id="product-section"></div>
  </main>
  
 <!-- Footer Injection Target -->
  <div id="footer-container"></div>
  
  
  
  <script>
    // DOM Elements
    const slider = document.getElementById('slider');
    const prevBtn = document.getElementById('prev-slide');
    const nextBtn = document.getElementById('next-slide');
    const images = slider.querySelectorAll('img');
   
    // Slider functionality
    let currentSlide = 0;
    const totalSlides = images.length;
    let slideInterval;
    
    function showSlide(index) {
      // Reset all images
      images.forEach(img => img.classList.remove('active'));
      
      // Handle index boundaries
      if (index >= totalSlides) currentSlide = 0;
      else if (index < 0) currentSlide = totalSlides - 1;
      else currentSlide = index;
      
      // Show current slide
      images[currentSlide].classList.add('active');
    }
    
    function nextSlide() {
      showSlide(currentSlide + 1);
    }
    
    function prevSlide() {
      showSlide(currentSlide - 1);
    }
    
    function startSlider() {
      slideInterval = setInterval(nextSlide, 7000);
    }
    
    // Initialize slider
    showSlide(0);
    startSlider();
    
    // Event listeners for slider controls
    nextBtn.addEventListener('click', () => {
      clearInterval(slideInterval);
      nextSlide();
      startSlider();
    });
    
    prevBtn.addEventListener('click', () => {
      clearInterval(slideInterval);
      prevSlide();
      startSlider();
    });
    
    // Mobile menu toggle
    hamburger.addEventListener('click', () => {
      navLinks.classList.toggle('active');
    });
    
    // Modal functionality
    participateBtn.addEventListener('click', () => {
      participationModal.classList.add('active');
      document.body.style.overflow = 'hidden'; // Prevent background scrolling
    });
    
    closeModals.forEach(btn => {
      btn.addEventListener('click', () => {
        participationModal.classList.remove('active');
        paymentModal.classList.remove('active');
        successModal.classList.remove('active');
        document.body.style.overflow = 'auto'; // Re-enable scrolling
      });
    });
    
    // Close modals when clicking outside
    window.addEventListener('click', (e) => {
      if (e.target === participationModal) {
        participationModal.classList.remove('active');
        document.body.style.overflow = 'auto';
      }
      if (e.target === paymentModal) {
        paymentModal.classList.remove('active');
        document.body.style.overflow = 'auto';
      }
      if (e.target === successModal) {
        successModal.classList.remove('active');
        document.body.style.overflow = 'auto';
      }
    });
    
  </script>

<!-- Load Injectors -->
  <script src="script.js" defer></script>
</body>
</html>
